---
import { getCollection, getEntry } from 'astro:content';
import SingleChoiceResultLayout from '../../layouts/SingleChoiceResultLayout.astro';

export async function getStaticPaths() {
    const singleChoices = await getCollection('single_choice');
    const config = await getEntry('config', 'config');

    return singleChoices.map((singleChoice, index) => ({
        params: { slug: singleChoice.slug },
        props: {
            singleChoice,
            index: index + 1,
            max: singleChoices.length,
            next: config.data.page_list.at(index + 1)?.id ?? null
        }
    }));
}

const { singleChoice, index, max, next } = Astro.props;
---

<SingleChoiceResultLayout
        choices={singleChoice.data.choices}
        reasons={singleChoice.data.reasons}
        valid={singleChoice.data.valid}
        subject={singleChoice.data.subject}
        index={index}
        max={max}
        next={next}
        id={singleChoice.data.id}
>
</SingleChoiceResultLayout>